<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãªãƒ¼ã™ã¾ã¤ã‚Š Discordã‚µãƒ¼ãƒãƒ¼æ§‹ç¯‰ãƒ»é‹ç”¨ã‚¬ã‚¤ãƒ‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- Chosen Palette: Warm Neutrals with Medical/Clean Accents (Teal/Pink) -->
    <!-- Application Structure Plan:
        1. Dashboard Header: Introduction and core purpose.
        2. Role Simulator (Interactive): Users select a role (Admin, Exec, General) to see their specific permissions and duties. This simplifies the complex matrix into a user-centric view.
        3. Visual Server Map (Interactive Tree): A clickable directory structure representing Categories and Channels. Clicking a channel reveals details (Purpose, Permissions) in a side panel.
        4. Operational Insights (Data Viz): A dashboard section using Chart.js to visualize the balance of the server (Public vs Private channels, Read vs Write permissions).
        5. Guideline Accordion: Collapsible sections for operational rules to keep the UI clean.
    -->
    <!-- Visualization & Content Choices:
        1. Role Simulator: Goal -> Personalize info. Method -> JS Object filtering. Interaction -> Dropdown selection updates DOM.
        2. Server Map: Goal -> Navigation clarity. Method -> HTML/CSS Tree structure (nested divs with borders). Interaction -> Click to highlight and show details. NO SVG used.
        3. Channel Distribution Chart: Goal -> Show server transparency balance. Method -> Chart.js Donut Chart. Interaction -> Hover for counts.
        4. Guideline Accordion: Goal -> Digestible rules. Method -> JS toggle.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
        }
        .tree-line {
            position: relative;
        }
        .tree-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: -1rem;
            border-left: 2px solid #e2e8f0;
        }
        .tree-item::before {
            content: '';
            position: absolute;
            top: 1.5rem;
            left: -1rem;
            width: 1rem;
            border-top: 2px solid #e2e8f0;
        }
        .active-channel {
            background-color: #f0f9ff;
            border-right: 4px solid #0ea5e9;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            height: 300px;
        }
        /* Custom scrollbar for channel list */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <span class="text-2xl">ğŸ¥</span>
                <div>
                    <h1 class="text-xl font-bold text-slate-800">ãªãƒ¼ã™ã¾ã¤ã‚Š</h1>
                    <p class="text-xs text-slate-500">Discordã‚µãƒ¼ãƒãƒ¼æ§‹ç¯‰ãƒ»é‹ç”¨ã‚¬ã‚¤ãƒ‰</p>
                </div>
            </div>
            <nav class="hidden md:flex space-x-6">
                <button onclick="scrollToSection('roles-section')" class="text-sm font-medium hover:text-teal-600 transition">å½¹å‰²ãƒ»ä½“åˆ¶</button>
                <button onclick="scrollToSection('structure-section')" class="text-sm font-medium hover:text-teal-600 transition">ã‚µãƒ¼ãƒãƒ¼æ§‹æˆ</button>
                <button onclick="scrollToSection('guidelines-section')" class="text-sm font-medium hover:text-teal-600 transition">é‹ç”¨ãƒ«ãƒ¼ãƒ«</button>
            </nav>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- Intro -->
        <div class="mb-12 text-center max-w-3xl mx-auto">
            <h2 class="text-3xl font-bold text-slate-900 mb-4">é‹å–¶ï¼†ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®å††æ»‘ãªé€£æºã¸</h2>
            <p class="text-lg text-slate-600 leading-relaxed">
                æœ¬ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ã€Œãªãƒ¼ã™ã¾ã¤ã‚Šã€Discordã‚µãƒ¼ãƒãƒ¼ã®å…¨ä½“åƒã‚’å¯è¦–åŒ–ã—ãŸã‚‚ã®ã§ã™ã€‚
                å½¹å‰²ã”ã¨ã®æ¨©é™ç¯„å›²ã€ãƒãƒ£ãƒ³ãƒãƒ«ã®ç›®çš„ã€ãã—ã¦é‹ç”¨ã®ãƒ«ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«ç¢ºèªã§ãã¾ã™ã€‚
            </p>
        </div>

        <!-- Section 1: Team & Roles Simulator -->
        <section id="roles-section" class="mb-16">
            <div class="border-l-4 border-teal-500 pl-4 mb-6">
                <h3 class="text-2xl font-bold text-slate-800">1. å½¹å‰²ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h3>
                <p class="text-sm text-slate-500 mt-1">ã‚ãªãŸã®ç«‹å ´ã‚’é¸æŠã—ã¦ã€æ¨©é™ã¨ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>
            </div>

            <div class="bg-white rounded-xl shadow-lg overflow-hidden grid grid-cols-1 md:grid-cols-3 gap-0">
                <!-- Role Selector -->
                <div class="p-6 bg-slate-50 border-b md:border-b-0 md:border-r border-slate-200">
                    <label class="block text-sm font-medium text-slate-700 mb-2">è¡¨ç¤ºã™ã‚‹å½¹å‰²ã‚’é¸æŠ</label>
                    <div class="space-y-2">
                        <button onclick="updateRoleView('admin')" id="btn-admin" class="role-btn w-full text-left px-4 py-3 rounded-lg border transition hover:bg-white hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500 bg-teal-50 border-teal-200 ring-2 ring-teal-500">
                            <div class="flex items-center justify-between">
                                <span class="font-bold text-teal-900">é‹å–¶ãƒãƒ¼ãƒ  (3å)</span>
                                <span class="text-xs bg-teal-200 text-teal-800 px-2 py-1 rounded-full">ç®¡ç†è€…</span>
                            </div>
                        </button>
                        <button onclick="updateRoleView('exec')" id="btn-exec" class="role-btn w-full text-left px-4 py-3 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 transition focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <div class="flex items-center justify-between">
                                <span class="font-bold">å®Ÿè¡Œå§”å“¡ (10å)</span>
                                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">å®Ÿå‹™</span>
                            </div>
                        </button>
                        <button onclick="updateRoleView('general')" id="btn-general" class="role-btn w-full text-left px-4 py-3 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 transition focus:outline-none focus:ring-2 focus:ring-green-500">
                            <div class="flex items-center justify-between">
                                <span class="font-bold">ä¸€èˆ¬å‚åŠ è€…</span>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">ã‚²ã‚¹ãƒˆ</span>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Role Details -->
                <div class="col-span-1 md:col-span-2 p-8 relative">
                    <div id="role-content">
                        <!-- Content injected via JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Server Map & Channel Explorer -->
        <section id="structure-section" class="mb-16">
            <div class="flex flex-col md:flex-row justify-between items-end mb-6 border-l-4 border-blue-500 pl-4">
                <div>
                    <h3 class="text-2xl font-bold text-slate-800">2. ã‚µãƒ¼ãƒãƒ¼æ§‹æˆãƒãƒƒãƒ—</h3>
                    <p class="text-sm text-slate-500 mt-1">ã‚«ãƒ†ã‚´ãƒªãƒ¼ã¨ãƒãƒ£ãƒ³ãƒãƒ«ã®æ§‹é€ ã€ãŠã‚ˆã³ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®åˆ†å¸ƒã€‚</p>
                </div>
                <!-- Stats Chart Container -->
                 <div class="w-full md:w-auto mt-4 md:mt-0 flex items-center bg-white p-2 rounded-lg shadow-sm border border-slate-200">
                     <div class="text-xs font-semibold text-slate-500 mr-4">ãƒãƒ£ãƒ³ãƒãƒ«ç¨®åˆ¥å‰²åˆ</div>
                     <div style="height: 60px; width: 60px;">
                         <canvas id="miniStatsChart"></canvas>
                     </div>
                 </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 h-[600px]">
                <!-- Interactive Tree -->
                <div class="col-span-1 bg-white rounded-xl shadow-md border border-slate-200 overflow-hidden flex flex-col">
                    <div class="p-4 bg-slate-50 border-b border-slate-200 font-semibold text-slate-700 flex justify-between items-center">
                        <span>ãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§</span>
                        <span class="text-xs font-normal text-slate-400">ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©³ç´°ã‚’è¡¨ç¤º</span>
                    </div>
                    <div class="overflow-y-auto flex-grow p-4 custom-scroll" id="channel-tree">
                        <!-- Tree injected JS -->
                    </div>
                </div>

                <!-- Detail Panel -->
                <div class="col-span-1 lg:col-span-2 bg-white rounded-xl shadow-md border border-slate-200 p-8 flex flex-col justify-center items-center text-center relative overflow-hidden" id="channel-detail-panel">
                    <div class="absolute top-0 left-0 w-full h-2 bg-slate-200" id="detail-header-bar"></div>
                    <div id="detail-placeholder" class="text-slate-400">
                        <span class="text-4xl block mb-2">ğŸ‘†</span>
                        <p>å·¦ã®ãƒªã‚¹ãƒˆã‹ã‚‰ãƒãƒ£ãƒ³ãƒãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                    </div>
                    <div id="detail-content" class="hidden w-full text-left">
                        <!-- Content injected JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Permission Matrix Visualization -->
        <section class="mb-16">
            <div class="border-l-4 border-indigo-500 pl-4 mb-6">
                <h3 class="text-2xl font-bold text-slate-800">3. æ¨©é™å¯è¦–åŒ–ï¼ˆã‚¢ã‚¯ã‚»ã‚¹è§£æï¼‰</h3>
                <p class="text-sm text-slate-500 mt-1">å„ãƒ­ãƒ¼ãƒ«ãŒã©ã®ã‚¨ãƒªã‚¢ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹ã®åˆ†å¸ƒçŠ¶æ³ã€‚</p>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                 <div class="chart-container">
                    <canvas id="permissionChart"></canvas>
                </div>
                <div class="mt-4 text-center text-sm text-slate-500">
                    <p>â€» å…¨ä½“ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ¬ãƒ™ãƒ«ã¨é€æ˜æ€§ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>
                </div>
            </div>
        </section>

        <!-- Section 4: Operational Guidelines -->
        <section id="guidelines-section" class="mb-24">
            <div class="border-l-4 border-rose-500 pl-4 mb-6">
                <h3 class="text-2xl font-bold text-slate-800">4. é‹ç”¨ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³</h3>
                <p class="text-sm text-slate-500 mt-1">å¥å…¨ãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£é‹å–¶ã®ãŸã‚ã®é‡è¦ãƒ«ãƒ¼ãƒ«ã€‚</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Card 1 -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition">
                    <div class="flex items-start mb-4">
                        <div class="bg-indigo-100 text-indigo-600 p-3 rounded-lg mr-4">
                            <span class="text-xl">ğŸ§µ</span>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-slate-800">ã‚¹ãƒ¬ãƒƒãƒ‰æ´»ç”¨ã®å¾¹åº•</h4>
                            <p class="text-sm text-slate-500 mt-1">æƒ…å ±ã®åŸ‹æ²¡ã‚’é˜²ããŸã‚ã®ãƒ«ãƒ¼ãƒ«</p>
                        </div>
                    </div>
                    <ul class="space-y-2 text-sm text-slate-600 list-disc list-inside bg-slate-50 p-4 rounded-lg">
                        <li>ç‰¹å®šã®è©±é¡Œï¼ˆã‚¿ã‚¹ã‚¯ç›¸è«‡ã€ä¼šè­°è­°é¡Œï¼‰ã¯å¿…ãšã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ä½œæˆ</li>
                        <li>ã‚¹ãƒ¬ãƒƒãƒ‰ã«ã¯åˆ†ã‹ã‚Šã‚„ã™ã„ã‚¿ã‚¤ãƒˆãƒ«ã‚’ä»˜ã‘ã‚‹</li>
                        <li>ãƒ¡ã‚¤ãƒ³ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¯ã€Œè¦‹å‡ºã—ã€ã¨ã—ã¦ä½¿ã†</li>
                    </ul>
                </div>

                <!-- Card 2 -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition">
                    <div class="flex items-start mb-4">
                        <div class="bg-emerald-100 text-emerald-600 p-3 rounded-lg mr-4">
                            <span class="text-xl">ğŸ‘</span>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-slate-800">ãƒªãƒ³ã‚¯ã¨ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h4>
                            <p class="text-sm text-slate-500 mt-1">åŠ¹ç‡çš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³</p>
                        </div>
                    </div>
                    <ul class="space-y-2 text-sm text-slate-600 list-disc list-inside bg-slate-50 p-4 rounded-lg">
                        <li>è³‡æ–™URLå…±æœ‰æ™‚ã®èª¬æ˜æ–‡ã¯æœ€å°é™ã«ã™ã‚‹</li>
                        <li>ã€Œäº†è§£ã€ãªã©ã¯ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆâœ…ï¼‰ã§æ¸ˆã¾ã›ã‚‹</li>
                        <li>ãƒãƒ£ãƒƒãƒˆãƒ­ã‚°ã‚’æµã•ãªã„å·¥å¤«ã‚’ã™ã‚‹</li>
                    </ul>
                </div>

                <!-- Card 3 -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition">
                    <div class="flex items-start mb-4">
                        <div class="bg-pink-100 text-pink-600 p-3 rounded-lg mr-4">
                            <span class="text-xl">ğŸ“¸</span>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-slate-800">å†™çœŸã¨SNS</h4>
                            <p class="text-sm text-slate-500 mt-1">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨åºƒå ±ã®ãƒãƒ©ãƒ³ã‚¹</p>
                        </div>
                    </div>
                    <div class="bg-pink-50 border border-pink-100 p-4 rounded-lg text-sm text-pink-800">
                        <p class="font-semibold mb-2">åŸºæœ¬ãƒ«ãƒ¼ãƒ«: SNSæŠ•ç¨¿OK</p>
                        <p>ã€Œã‚¤ãƒ™ãƒ³ãƒˆã®é¢¨æ™¯ã€ãƒãƒ£ãƒ³ãƒãƒ«ã®å†™çœŸã¯SNSåˆ©ç”¨ã«åŒæ„ã—ãŸã‚‚ã®ã¨ã¿ãªã—ã¾ã™ã€‚ãŸã ã—ã€äººç‰©ãŒå†™ã‚‹å ´åˆã¯äº‹å‰ã®è¨±å¯å–ã‚Šã‚’å¿…é ˆã¨ã—ã¾ã™ã€‚</p>
                    </div>
                </div>

                <!-- Card 4 -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition">
                    <div class="flex items-start mb-4">
                        <div class="bg-amber-100 text-amber-600 p-3 rounded-lg mr-4">
                            <span class="text-xl">âš–ï¸</span>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-slate-800">é€æ˜æ€§ã¨æ©Ÿå¯†æ€§</h4>
                            <p class="text-sm text-slate-500 mt-1">ã‚ªãƒ¼ãƒ—ãƒ³ãªé‹å–¶ã®ãŸã‚ã«</p>
                        </div>
                    </div>
                    <ul class="space-y-2 text-sm text-slate-600 bg-slate-50 p-4 rounded-lg">
                        <li class="flex items-center"><span class="text-green-500 mr-2">â—</span> è­°è«–ã¯å¯èƒ½ãªé™ã‚Šã€ŒğŸ”“å…¬é–‹å®Ÿè¡Œå§”å“¡ã€ã§</li>
                        <li class="flex items-center"><span class="text-red-500 mr-2">â—</span> å€‹äººæƒ…å ±ãƒ»äºˆç®—ãƒ»æˆ¦ç•¥ã¯ã€ŒğŸ”’é‹å–¶ãƒ¡ãƒ³ãƒãƒ¼ã€ã§</li>
                        <li class="text-xs text-slate-500 mt-2 ml-4">å‚åŠ è€…ã«ç†±é‡ã‚’ä¼ãˆã‚‹ãŸã‚ã€ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¦‹ã›ã‚‹æ„è­˜ã‚’æŒã¤</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-400 py-8 text-center">
        <p class="mb-2">ãªãƒ¼ã™ã¾ã¤ã‚Š é‹å–¶äº‹å‹™å±€</p>
        <p class="text-xs">Â© 2026 Naasu Matsuri Discord Guide</p>
    </footer>

    <script>
        // --- Data Definitions ---
        const roleData = {
            admin: {
                title: "é‹å–¶ãƒãƒ¼ãƒ ",
                count: "3å",
                members: ["è¥¿å±±å¦™å­", "ç¯ å´å„ªå­", "çœ‹è­·å¸«ãƒãƒğŸŒŸã»ã£ã—ãƒ¼"],
                color: "teal",
                desc: "ã‚µãƒ¼ãƒãƒ¼å…¨åŸŸã®ç®¡ç†ã€æ©Ÿå¯†æƒ…å ±ï¼ˆæˆ¦ç•¥ãƒ»äºˆç®—ï¼‰ã®å–ã‚Šæ‰±ã„ã€æœ€çµ‚æ±ºå®šäº‹é …ã®å‘ŠçŸ¥ã€‚",
                access: "å…¨ãƒãƒ£ãƒ³ãƒãƒ«ã®é–²è¦§ãƒ»æŠ•ç¨¿ãƒ»è¨­å®šå¤‰æ›´",
                badge: "ç®¡ç†è€…"
            },
            exec: {
                title: "å®Ÿè¡Œå§”å“¡",
                count: "10å",
                members: ["Katsurada Kazuto", "katayama", "ã„ã£ã¡ãƒ¼", "ãƒ™ãƒƒã‚«ãƒŸ", "æµ¦ç”°å…‹ç¾", "ç ‚ç”°å°†å¼¥", "é‹å–¶ãƒãƒ¼ãƒ 3å"],
                color: "blue",
                desc: "ã‚¤ãƒ™ãƒ³ãƒˆå®Ÿå‹™ï¼ˆã‚¿ã‚¹ã‚¯é‚è¡Œï¼‰ã€è­°äº‹éŒ²ä½œæˆã€åˆ¶ä½œãƒ—ãƒ­ã‚»ã‚¹ã®å…¬é–‹ï¼ˆç››ã‚Šä¸Šã’ï¼‰ã€‚",
                access: "å®Ÿå‹™ãƒãƒ£ãƒ³ãƒãƒ«æŠ•ç¨¿ã€å…¬é–‹å®Ÿè¡Œå§”å“¡ãƒãƒ£ãƒ³ãƒãƒ«æŠ•ç¨¿",
                badge: "å®Ÿå‹™ãƒªãƒ¼ãƒ€ãƒ¼"
            },
            general: {
                title: "ä¸€èˆ¬å‚åŠ è€…",
                count: "å¤šæ•°",
                members: ["çœ‹è­·å­¦ç”Ÿ", "çœ‹è­·å¸«", "ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢", "ã‚²ã‚¹ãƒˆ"],
                color: "green",
                desc: "ã‚¤ãƒ™ãƒ³ãƒˆã¸ã®å‚åŠ ã€æƒ…å ±ã®å—ä¿¡ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã®äº¤æµã€‚",
                access: "äº¤æµãƒãƒ£ãƒ³ãƒãƒ«æŠ•ç¨¿ã€å…¬é–‹æƒ…å ±é–²è¦§ã®ã¿",
                badge: "ã‚²ã‚¹ãƒˆ"
            }
        };

        const serverStructure = [
            {
                id: "cat1",
                name: "ğŸ“Œ ã¯ã˜ã‚ã«ï¼ˆç·åˆæ¡ˆå†…ï¼‰",
                desc: "å‚åŠ è€…ãŒæœ€åˆã«ç›®ã«ã™ã‚‹åŸºç›¤ã‚¨ãƒªã‚¢",
                channels: [
                    { name: "ğŸ“Œï½œãƒ‡ã‚£ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä½¿ç”¨ãƒ«ãƒ¼ãƒ«", type: "read", access: "all", desc: "ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã‚¹ãƒ¬ãƒƒãƒ‰æ¨å¥¨ã€ã‚¹ã‚¿ãƒ³ãƒ—åå¿œã®ãƒ«ãƒ¼ãƒ«ã‚’æ²è¼‰ã€‚", restricted: false },
                    { name: "ğŸ› ï¸ï½œæ“ä½œã‚¬ã‚¤ãƒ‰", type: "read", access: "all", desc: "Discordåˆå¿ƒè€…å‘ã‘ã®åŸºæœ¬æ“ä½œè§£èª¬ã€‚", restricted: false }
                ]
            },
            {
                id: "cat2",
                name: "ğŸ’¬ å…¨ä½“ãƒ»äº¤æµ",
                desc: "å‚åŠ è€…å…¨å“¡ãŒæ´»å‹•ã™ã‚‹ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢",
                channels: [
                    { name: "ğŸ“£ï½œãŠçŸ¥ã‚‰ã›", type: "read-write-admin", access: "all", desc: "ã‚¤ãƒ™ãƒ³ãƒˆã®é‡è¦å‘ŠçŸ¥ã€å…¬å¼ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã€‚ï¼ˆæŠ•ç¨¿ã¯é‹å–¶ãƒ»å®Ÿè¡Œå§”å“¡ã®ã¿ï¼‰", restricted: false },
                    { name: "ğŸ‘‹ï½œè‡ªå·±ç´¹ä»‹ãƒãƒ£ãƒ³ãƒãƒ«", type: "write", access: "all", desc: "æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®æŒ¨æ‹¶ã€‚å°‚ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ”ãƒ³ç•™ã‚ã€‚", restricted: false },
                    { name: "ğŸ’¬ï½œé›‘è«‡", type: "write", access: "all", desc: "è‡ªç”±ãªäº¤æµã€ãƒ•ãƒªãƒ¼ãƒˆãƒ¼ã‚¯ã€‚", restricted: false },
                    { name: "ğŸ“¸ï½œã‚¤ãƒ™ãƒ³ãƒˆã®é¢¨æ™¯", type: "write", access: "all", desc: "æº–å‚™ãƒ»å½“æ—¥ã®å†™çœŸå…±æœ‰ã€‚SNSæŠ•ç¨¿åŒæ„ãƒãƒ£ãƒ³ãƒãƒ«ã€‚", restricted: false },
                    { name: "ğŸ¤”ï½œè³ªå•ãƒ»ç›¸è«‡ï¼šåˆå¿ƒè€…ã‚µãƒãƒ¼ãƒˆ", type: "write", access: "all", desc: "æ“ä½œã‚„å‚åŠ æ–¹æ³•ã«é–¢ã™ã‚‹ãƒ˜ãƒ«ãƒ—ãƒ‡ã‚¹ã‚¯ã€‚", restricted: false },
                    { name: "ğŸ’»ï½œè­°äº‹éŒ²", type: "read-write-admin", access: "all", desc: "é€æ˜æ€§ç¶­æŒã®ãŸã‚ã€å®šä¾‹ä¼šè­°ç­‰ã®ãƒ­ã‚°ã‚’å…¬é–‹ã€‚ï¼ˆé–²è¦§å°‚ç”¨ï¼‰", restricted: false }
                ]
            },
            {
                id: "cat3",
                name: "ğŸ‘¥ ãªãƒ¼ã™ã¾ã¤ã‚Šé‹å–¶",
                desc: "å®Ÿå‹™ã‚¨ãƒªã‚¢ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„ï¼‰",
                channels: [
                    { name: "ğŸ”’ï½œé‹å–¶ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆè¥¿å±±â€¦ï¼‰", type: "private", access: "admin", desc: "ã€å®Œå…¨é™å®šã€‘æˆ¦ç•¥ãƒ»äºˆç®—ç­‰ã®ã‚³ã‚¢æ„æ€æ±ºå®šã€‚", restricted: true },
                    { name: "ğŸ”“ï½œï¼ˆèª°ã§ã‚‚é–²è¦§å¯èƒ½ï¼‰å®Ÿè¡Œå§”å“¡", type: "read-write-exec", access: "all", desc: "ã€ãƒ—ãƒ­ã‚»ã‚¹å…¬é–‹ã€‘åˆ¶ä½œãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ©ã‚¤ãƒ–å…¬é–‹ã€‚ï¼ˆæŠ•ç¨¿ã¯é‹å–¶ãƒ»å®Ÿè¡Œå§”å“¡ã®ã¿ï¼‰", restricted: false },
                    { name: "ğŸ”’ğŸ“…ï½œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»ã‚¿ã‚¹ã‚¯", type: "private", access: "exec", desc: "ã€å®Ÿå‹™é™å®šã€‘é€²æ—å ±å‘Šã€æœŸé™ç®¡ç†ã€‚", restricted: true },
                    { name: "ğŸ“ï½œæ±ºå®šäº‹é …", type: "read-write-admin", access: "all", desc: "ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€‘ç¢ºå®šãƒ«ãƒ¼ãƒ«ã®ãƒ­ã‚°ä¿ç®¡ã€‚ï¼ˆé–²è¦§å°‚ç”¨ï¼‰", restricted: false }
                ]
            }
        ];

        // --- Functions ---

        // 1. Role Simulator
        function updateRoleView(roleKey) {
            // Update buttons state
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('bg-teal-50', 'bg-blue-50', 'bg-green-50', 'ring-2', 'ring-teal-500', 'ring-blue-500', 'ring-green-500', 'border-teal-200', 'border-blue-200', 'border-green-200');
                btn.classList.add('bg-white', 'border-slate-200');
            });

            const data = roleData[roleKey];
            const btn = document.getElementById(`btn-${roleKey}`);
            
            // Add active styling based on role color
            btn.classList.remove('bg-white', 'border-slate-200');
            if(data.color === 'teal') {
                btn.classList.add('bg-teal-50', 'border-teal-200', 'ring-2', 'ring-teal-500');
            } else if(data.color === 'blue') {
                btn.classList.add('bg-blue-50', 'border-blue-200', 'ring-2', 'ring-blue-500');
            } else {
                btn.classList.add('bg-green-50', 'border-green-200', 'ring-2', 'ring-green-500');
            }

            // Render Content
            const container = document.getElementById('role-content');
            container.innerHTML = `
                <div class="animate-fade-in">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-3xl font-bold text-slate-800">${data.title}</h2>
                        <span class="text-sm font-mono bg-slate-100 px-3 py-1 rounded text-slate-500">${data.count}</span>
                    </div>
                    <p class="text-lg text-slate-600 mb-6 border-l-4 border-${data.color}-400 pl-4">${data.desc}</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-5 rounded-lg border border-slate-100 shadow-sm">
                            <h4 class="font-bold text-slate-700 mb-2 flex items-center">
                                <span class="mr-2">ğŸ”‘</span> æ¨©é™ãƒ»ã‚¢ã‚¯ã‚»ã‚¹
                            </h4>
                            <p class="text-sm text-slate-600">${data.access}</p>
                        </div>
                        <div class="bg-white p-5 rounded-lg border border-slate-100 shadow-sm">
                            <h4 class="font-bold text-slate-700 mb-2 flex items-center">
                                <span class="mr-2">ğŸ‘¥</span> ãƒ¡ãƒ³ãƒãƒ¼
                            </h4>
                            <div class="flex flex-wrap gap-2">
                                ${data.members.map(m => `<span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded">${m}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 2. Server Tree Builder
        function buildChannelTree() {
            const container = document.getElementById('channel-tree');
            let html = '';

            serverStructure.forEach((cat, index) => {
                html += `
                    <div class="mb-4">
                        <div class="flex items-center text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">
                            <span class="mr-2">ğŸ“‚</span> ${cat.name}
                        </div>
                        <div class="pl-2 border-l-2 border-slate-200 ml-1 space-y-1">
                `;
                
                cat.channels.forEach((chan, cIndex) => {
                    const icon = chan.restricted ? 'ğŸ”’' : (chan.name.includes('ğŸ“¸') ? 'ğŸ“¸' : (chan.name.includes('ğŸ“£') ? 'ğŸ“£' : '#'));
                    // Encode channel data into data attributes
                    const dataStr = encodeURIComponent(JSON.stringify(chan));
                    html += `
                        <button onclick="showChannelDetail('${dataStr}', this)" class="channel-item w-full text-left px-3 py-2 rounded-md hover:bg-slate-100 transition flex items-center text-sm text-slate-600 group">
                            <span class="mr-2 text-slate-400 group-hover:text-slate-600">${icon}</span>
                            <span class="truncate">${chan.name.replace(/^[#ğŸ”’ğŸ“£ğŸ“¸ğŸ“ŒğŸ› ï¸ğŸ‘‹ğŸ¤”ğŸ’»ğŸ“ğŸ”“ğŸ“…\sï½œ]+/, '')}</span>
                            ${chan.restricted ? '<span class="ml-auto text-xs text-amber-500 bg-amber-50 px-1 rounded">Private</span>' : ''}
                        </button>
                    `;
                });

                html += `</div></div>`;
            });

            container.innerHTML = html;
        }

        // 3. Channel Detail Viewer
        function showChannelDetail(dataStr, element) {
            // Handle Active State
            document.querySelectorAll('.channel-item').forEach(el => el.classList.remove('active-channel', 'text-teal-700', 'font-medium'));
            element.classList.add('active-channel', 'text-teal-700', 'font-medium');

            const data = JSON.parse(decodeURIComponent(dataStr));
            const placeholder = document.getElementById('detail-placeholder');
            const content = document.getElementById('detail-content');
            const headerBar = document.getElementById('detail-header-bar');

            placeholder.classList.add('hidden');
            content.classList.remove('hidden');

            // Color coding header
            let headerColor = 'bg-teal-500';
            if (data.restricted) headerColor = 'bg-rose-500'; // Private
            else if (data.type.includes('read')) headerColor = 'bg-blue-400'; // Read only

            headerBar.className = `absolute top-0 left-0 w-full h-2 ${headerColor}`;

            // Permission Text Logic
            let permText = "";
            let permBadge = "";
            
            if (data.name.includes('ğŸ”’ï½œé‹å–¶ãƒ¡ãƒ³ãƒãƒ¼')) {
                permText = "é‹å–¶ãƒãƒ¼ãƒ ï¼ˆ3åï¼‰ã®ã¿ãŒé–²è¦§ãƒ»æŠ•ç¨¿å¯èƒ½ã€‚";
                permBadge = `<span class="bg-rose-100 text-rose-700 px-2 py-1 rounded text-xs font-bold">TOP SECRET</span>`;
            } else if (data.name.includes('ğŸ”’ğŸ“…')) {
                permText = "é‹å–¶ãƒãƒ¼ãƒ ã¨å®Ÿè¡Œå§”å“¡ã®ã¿ãŒé–²è¦§ãƒ»æŠ•ç¨¿å¯èƒ½ã€‚ä¸€èˆ¬å‚åŠ è€…ã‹ã‚‰ã¯è¦‹ãˆã¾ã›ã‚“ã€‚";
                permBadge = `<span class="bg-amber-100 text-amber-700 px-2 py-1 rounded text-xs font-bold">STAFF ONLY</span>`;
            } else if (data.name.includes('ğŸ”“ï½œ')) {
                permText = "å…¨å“¡ãŒé–²è¦§å¯èƒ½ã€‚æŠ•ç¨¿ã¯é‹å–¶ãƒ»å®Ÿè¡Œå§”å“¡ã®ã¿ã€‚";
                permBadge = `<span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs font-bold">PUBLIC VIEW</span>`;
            } else if (data.type === 'read' || data.type === 'read-write-admin') {
                permText = "å…¨å“¡ãŒé–²è¦§å¯èƒ½ã€‚æŠ•ç¨¿ã¯é‹å–¶å´ã®ã¿ã€‚";
                permBadge = `<span class="bg-slate-100 text-slate-700 px-2 py-1 rounded text-xs font-bold">READ ONLY</span>`;
            } else {
                permText = "å…¨å“¡ãŒé–²è¦§ãƒ»æŠ•ç¨¿å¯èƒ½ã€‚";
                permBadge = `<span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-bold">OPEN</span>`;
            }

            content.innerHTML = `
                <div class="animate-fade-in">
                    <div class="flex justify-between items-start mb-4">
                        <h2 class="text-2xl font-bold text-slate-800 break-words w-3/4">${data.name}</h2>
                        ${permBadge}
                    </div>
                    
                    <div class="mb-6">
                        <h5 class="text-xs font-bold text-slate-400 uppercase mb-1">ç›®çš„ãƒ»å½¹å‰²</h5>
                        <p class="text-lg text-slate-700 leading-relaxed">${data.desc}</p>
                    </div>

                    <div class="bg-slate-50 rounded-lg p-4 border border-slate-100">
                        <h5 class="text-xs font-bold text-slate-400 uppercase mb-2">ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™</h5>
                        <div class="flex items-start">
                            <span class="text-lg mr-2">ğŸ”</span>
                            <p class="text-sm text-slate-600 mt-1">${permText}</p>
                        </div>
                    </div>

                     <div class="mt-6 pt-6 border-t border-slate-100">
                        <h5 class="text-xs font-bold text-slate-400 uppercase mb-2">æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h5>
                        <ul class="text-sm text-slate-600 space-y-2">
                             ${data.name.includes('ğŸ“¸') ? '<li>âœ… å†™çœŸã‚’æŠ•ç¨¿ã™ã‚‹ (SNSè¨±å¯æ¸ˆ)</li><li>âœ… ç´ æ•µãªå†™çœŸã«ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã™ã‚‹</li>' : ''}
                             ${data.name.includes('ã‚¹ãƒ¬ãƒƒãƒ‰') ? '<li>âœ… ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ä½œæˆã—ã¦ä¼šè©±ã™ã‚‹</li>' : ''}
                             ${data.restricted ? '<li>âš ï¸ æ©Ÿå¯†æƒ…å ±ã®æ‰±ã„ã«æ³¨æ„ã™ã‚‹</li>' : ''}
                             <li>âœ… çµµæ–‡å­—ã‚¹ã‚¿ãƒ³ãƒ—ã§åå¿œã™ã‚‹</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        // 4. Charts Initialization
        function initCharts() {
            // Chart 1: Permission Matrix / Access Distribution
            const ctx1 = document.getElementById('permissionChart').getContext('2d');
            
            // Data derived from the matrix in the prompt
            // General: 5 read/write, 3 read only, 2 hidden
            // Exec: 6 read/write, 3 read only, 1 hidden
            // Admin: All read/write
            
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['ä¸€èˆ¬å‚åŠ è€…', 'å®Ÿè¡Œå§”å“¡(10å)', 'é‹å–¶ãƒãƒ¼ãƒ (3å)'],
                    datasets: [
                        {
                            label: 'è‡ªç”±ã«æŠ•ç¨¿å¯èƒ½',
                            data: [5, 7, 12], // Approximate counts based on matrix
                            backgroundColor: '#4ade80', // green-400
                        },
                        {
                            label: 'é–²è¦§ã®ã¿å¯èƒ½',
                            data: [5, 2, 0], 
                            backgroundColor: '#60a5fa', // blue-400
                        },
                        {
                            label: 'ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ (éè¡¨ç¤º)',
                            data: [2, 1, 0],
                            backgroundColor: '#e2e8f0', // slate-200
                        }
                    ]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    scales: {
                        x: { stacked: true, grid: { display: false } },
                        y: { stacked: true, beginAtZero: true, max: 12 }
                    },
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw + ' ãƒãƒ£ãƒ³ãƒãƒ«';
                                }
                            }
                        }
                    }
                }
            });

            // Chart 2: Mini Stats (Donut) - Channel Type Breakdown
            const ctx2 = document.getElementById('miniStatsChart').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: ['å…¬é–‹ (Open)', 'é‹å–¶ç®¡ç† (Admin/Info)', 'éå…¬é–‹ (Private)'],
                    datasets: [{
                        data: [5, 5, 2], // 5 Open, 5 ReadOnly/AdminPost, 2 Private
                        backgroundColor: ['#4ade80', '#60a5fa', '#f43f5e'],
                        borderWidth: 0
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    cutout: '70%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: true }
                    }
                }
            });
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Initialization
        window.addEventListener('DOMContentLoaded', () => {
            updateRoleView('admin'); // Default view
            buildChannelTree();
            initCharts();
        });

    </script>
</body>
</html>
